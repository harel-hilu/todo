(()=>{"use strict";var e={n:s=>{var t=s&&s.__esModule?()=>s.default:()=>s;return e.d(t,{a:t}),t},d:(s,t)=>{for(var o in t)e.o(t,o)&&!e.o(s,o)&&Object.defineProperty(s,o,{enumerable:!0,get:t[o]})},o:(e,s)=>Object.prototype.hasOwnProperty.call(e,s)};const s=require("express");var t=e.n(s);const o=require("cookie-parser");var r=e.n(o);const d=require("uuid"),n=t()();n.set("views","../5-Heroku");const i=process.env.PORT||5e3,u={};n.use(t().static(__dirname+"/public")),n.use(t().json()),n.use(r()()),n.use((function(e,s,t){e.userId=e.cookies.todoUserId,void 0===e.userId?(e.userId=(0,d.v4)(),s.cookie("todoUserId",e.userId),u[e.userId]={},t()):e.userId in u?t():s.status(401).send("You cannot access this page. Delete cookies")})),n.get("/",((e,s)=>{s.render("index.ejs",{title:"My todo list"})})),n.get("/api/v1/tasks",((e,s)=>{s.status(200).send(u[e.userId])})),n.post("/api/v1/tasks",((e,s)=>{const t=e.body,o=u[e.userId];-1===t.id&&(t.id=(0,d.v4)()),o[t.id]=t,s.status(200).send(t)})),n.delete("/api/v1/tasks/:taskId",((e,s)=>{delete u[e.userId][e.params.taskId],s.status(200).send()})),n.listen(i,(()=>console.log("listening on port "+i)))})();
//# sourceMappingURL=bundle.main.js.map